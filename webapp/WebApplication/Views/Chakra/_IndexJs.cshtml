@using K9.WebApplication.Enums

<script type="text/javascript">

    $(function() {
        $(".chakra-code-planner-item").click(function() {
            var $el = $(this);
            var forecastType = $el.attr("data-forecast-type");
            var offset = $el.attr("data-offset");

            $el.parent().select(".month-chakra-code-container").removeClass("current");
            $el.select(".month-chakra-code-container").addClass("current");

            ajaxcontroller().get("@Url.Action("CalculateForecast", "Chakra")", {forecastType, offset}).done(
                function(result) {
                    if (result.success) {
                        var $panel = null;
                        debugger;
                        if (forecastType === "@EForecastType.Yearly") {
                            $panel = $("[data-panel-container-id='yearly-forecast']");
                        }
                        else if (forecastType === "@EForecastType.Monthly") {
                            $panel = $("[data-panel-container-id='monthly-forecast']");
                        }
                        else if (forecastType === "@EForecastType.Daily") {
                            $panel = $("[data-panel-container-id='daily-forecast']");
                        }

                        $panel.closest(".panel-title-text").html(result.data.Title);
                        $panel.closest(".panel-body").html(result.data.Forecast);
                    }
                });
        });
    });

</script>